FROM aos:latest AS build

EXPOSE 8081

#test
#COPY --from=build /usr/local/cargo/bin/core .

#works
####COPY --from=build /environment/target/x86_64-unknown-linux-musl/release/core .

#RUN mkdir ./storage

####COPY --from=build /environment/storage ./storage


#USER 1
#CMD ["./core node-name='alice node' node-id=1 port=8081 peers=127.0.0.1:8082,127.0.0.1:8083 ip=127.0.0.1:8081"]
####CMD ["./core", "node-name='alice node'", "node-id=1", "port=8081", "peers=127.0.0.1:8082,127.0.0.1:8083", "ip=127.0.0.1:8081"]
#CMD ["./core", "node-name='alice node'", "node-id=1", "port=8081", "peers=localhost:8082,localhost:8083", "ip=localhost:8081"]

CMD ["make", "alice"]
